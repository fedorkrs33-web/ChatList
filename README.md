# ChatList

Программа для отправки одного промта в несколько нейросетей и сравнения их ответов. Позволяет сохранять ценные результаты в базу данных для дальнейшего анализа.

## Возможности

- ✅ Отправка одного промта в несколько моделей одновременно
- ✅ Поддержка различных API (GigaChat, PolzaAI, YandexGPT)
- ✅ Сохранение промтов и результатов в SQLite базу данных
- ✅ Управление моделями через удобный интерфейс
- ✅ Поиск и сортировка промтов
- ✅ Экспорт результатов в Markdown и JSON
- ✅ Логирование всех операций
- ✅ **AI-ассистент для улучшения промтов** - автоматическое улучшение и переформулировка промтов с помощью AI

## Требования

- Python 3.14+
- Windows

## Установка

1. Клонируйте репозиторий или скачайте файлы проекта

2. Установите зависимости

```powershell
pip install -r requirements.txt
```

3. Создайте файл `.env` на основе `env.example` и добавьте ваши API-ключи:
# === GigaChat ===
# Требует два параметра:
GIGACHAT_CLIENT_ID,
GIGACHAT_CLIENT_SECRET

# === Yandex GPT ===
# Требует два параметра:
YANDEX_OAUTH_TOKEN=ваш_oauth_токен
YANDEX_FOLDER_ID=ваш_folder_id

# === Polza API ===
POLZA_API_KEY=ваш_ключ_polza

# === OpenRouter ===
OPENROUTER_API_KEY=ваш_openrouter_ключ


## Быстрый старт

### 1. Добавление моделей
Удалите базу данных chatlist.db

Это добавит в базу данных 5 популярных моделей:
- DeepSeek v3.2
- claude-3-haiku (Anthropic)
- GigaChat
- Yandex GPT
- grok-3-beta 

### 2. Запуск программы

```powershell
python main.py
```

### 3. Использование

1. **Введите промт** в текстовое поле или выберите из сохраненных

2. **(Опционально) Улучшите промт:**
   - Нажмите кнопку **"Улучшить промт"** или используйте контекстное меню (правый клик)
   - Выберите модель для улучшения
   - Настройте опции (генерация вариантов, адаптация под тип)
   - Выберите нужный вариант и нажмите "Использовать"

3. **Нажмите "Отправить"** - программа отправит запрос во все активные модели

4. **Выберите нужные результаты** чекбоксами

5. **Нажмите "Сохранить выбранные"** для сохранения в базу данных

## Управление данными

### Промты

- **Меню "Промты" → "Новый промт"** - создать новый промт с тегами
- **Меню "Промты" → "Управление промтами"** - просмотр, редактирование, удаление промтов
- Поиск и сортировка по дате, тексту или тегам

### Модели

- **Меню "Модели" → "Добавить модель"** - добавить новую модель
- **Меню "Модели" → "Управление моделями"** - просмотр, редактирование, удаление моделей
- Переключение активности моделей

### Результаты

- **Меню "Результаты" → "Просмотр результатов"** - просмотр всех сохраненных результатов
- Поиск по тексту промта, модели или ответу
- Сортировка по дате, модели или промту
- **Экспорт в Markdown** - для документирования
- **Экспорт в JSON** - для дальнейшей обработки

## Подключение моделей OpenRouter

Polza.ai предоставляет доступ к множеству моделей через единый API.

**Пример добавления модели:**
- Название: GPT-4 Turbo (OpenRouter)
- API URL: `https://openrouter.ai/api/v1/chat/completions`
- API ID: `openai/gpt-4-turbo`
- Переменная окружения: `OPENROUTER_API_KEY`
- Тип модели: `openrouter`

Список доступных моделей: https://openrouter.ai/models

## Функция "AI-ассистент для улучшения промтов"

### Описание

Новая функция позволяет автоматически улучшать промты с помощью AI-моделей. Это помогает:
- Сделать промты более четкими и конкретными
- Получить альтернативные формулировки
- Адаптировать промты под разные типы задач (код, анализ, креатив)

### Использование

1. **Через кнопку:**
   - Введите или выберите промт
   - Нажмите кнопку "Улучшить промт"
   - Выберите модель для улучшения
   - Нажмите "Ok"

### Возможности

- **Улучшение промта:** Получение более четкой и эффективной версии
- **Варианты переформулировки:** 3 альтернативных варианта
- **Адаптация под тип модели:** Специализация промта для кода, анализа или креатива
- **Асинхронная обработка:** Не блокирует интерфейс во время работы
- **Простое использование:** Один клик для подстановки улучшенного промта

## Структура проекта

```
ChatList/
├── main.py              # Главный модуль GUI
├── db.py                # Работа с базой данных
├── models.py            # Классы моделей нейросетей
├── network.py           # Отправка HTTP-запросов
├── config.py            # Конфигурация и переменные окружения
├── dialogs.py           # Диалоговые окна управления
├── test_db.py           # Тесты базы данных
├── test_models.py       # Тесты моделей
├── add_openrouter_models.py  # Скрипт добавления моделей OpenRouter
├── requirements.txt     # Зависимости проекта
├── .env.example         # Пример файла с переменными окружения
├── .gitignore           # Игнорируемые файлы
├── PROJECT.md           # Спецификация проекта
├── PLAN.md              # План реализации
├── DATABASE.md          # Схема базы данных
├── ICON_GUIDE.md        # Руководство по созданию иконки
└── README.md            # Этот файл
```

## Тестирование

Запуск тестов базы данных:
```powershell
python test_db.py
```

Запуск тестов моделей:
```powershell
python test_models.py
```

## Создание исполняемого файла

Для создания исполняемого .exe файла:

1. Убедитесь, что установлены все зависимости:
```powershell
pip install -r requirements.txt
```

2. **(Опционально) Добавьте иконку приложения:**
   - Создайте файл `app.ico` или `icon.ico` в корне проекта
   - Подробная инструкция в файле `ICON_GUIDE.md`

3. Запустите скрипт сборки:
```powershell
.\build.ps1
```

Или выполните команду вручную:
```powershell
pyinstaller --onefile --windowed --name "ChatList" --icon="app.ico" main.py
```

Исполняемый файл будет создан в папке `dist\ChatList.exe`.

**Параметры PyInstaller:**
- `--onefile` - создает один исполняемый файл
- `--windowed` - скрывает консольное окно (для GUI приложений)
- `--name "ChatList"` - имя выходного файла
- `--icon="app.ico"` - путь к файлу иконки (опционально)

## Логирование

Программа создает файл `chatlist.log` с логами всех операций:
- Запросы к API
- Ошибки
- Операции с базой данных

## База данных

База данных SQLite (`chatlist.db`) создается автоматически при первом запуске.

**Таблицы:**
- `prompts` - сохраненные промты
- `models` - модели нейросетей
- `results` - сохраненные результаты
- `settings` - настройки программы

Подробная схема базы данных описана в `DATABASE.md`.

## Поддерживаемые типы моделей

- **openai** - OpenAI API (GPT-4, GPT-3.5 и др.)
- **openrouter** - OpenRouter API (доступ к множеству моделей)
- **deepseek** - DeepSeek API
- **groq** - Groq API

## Разработка

### Добавление нового типа модели

1. Создайте класс модели, наследующийся от `Model` в `models.py`
2. Реализуйте метод `send_request()`
3. Зарегистрируйте в `ModelFactory`:
```python
ModelFactory.register_model_type('new_type', NewModelClass)
```

## Лицензия

См. файл LICENSE

## Поддержка

При возникновении проблем:
1. Проверьте файл `chatlist.log` на наличие ошибок
2. Убедитесь, что API-ключи правильно указаны в `.env`
3. Проверьте, что модели активны в интерфейсе программы
